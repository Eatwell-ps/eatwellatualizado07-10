<?php
namespace App\Models;

use App\Core\Model;
use App\Repositories\ClienteRepository;

class Cliente extends Model {
    public $id;
    public $nome;
    public $email;
    public $telefone;
    public $data_nascimento;
    public $peso;
    public $altura;
    public $objetivo;
    public $restricoes;
    public $data_cadastro;

    public function __construct() {
        parent::__construct(new ClienteRepository());
    }

    public function create($data) {
        return $this->repository->create($data);
    }

    public function update($id, $data) {
        return $this->repository->update($id, $data);
    }

    public function calcularIMC() {
        if ($this->peso && $this->altura) {
            return $this->peso / ($this->altura * $this->altura);
        }
        return null;
    }

    public function getClassificacaoIMC() {
        $imc = $this->calcularIMC();
        if (!$imc) return null;

        if ($imc < 18.5) return 'Abaixo do peso';
        if ($imc < 25) return 'Peso normal';
        if ($imc < 30) return 'Sobrepeso';
        if ($imc < 35) return 'Obesidade Grau I';
        if ($imc < 40) return 'Obesidade Grau II';
        return 'Obesidade Grau III';
    }
}